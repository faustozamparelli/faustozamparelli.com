import{t as $,a as U}from"../chunks/CfHltsqI.js";import{i as qe}from"../chunks/DDVQc6DN.js";import{_ as Ne,b as Me,ao as ge,A as G,h as I,$ as ye,x as Ce,k as q,N as se,y as Oe,z as ie,B as K,c as Y,ac as Le,C as xe,a as Te,D as De,ap as W,ag as ke,a7 as He,a1 as fe,aq as le,ar as ue,as as oe,F as Ee,at as ve,a8 as Re,au as Ve,av as Pe,af as Be,aw as Je,d as Ue,ax as Ye,aa as $e,ay as ze,az as Fe,aA as Ge,aB as Ke,i as We,aj as Xe,K as Ze,G as Qe,p as je,w as C,f as ce,q as ea,J as de,v as D,aC as aa,s as P,t as X}from"../chunks/CoxiGmE4.js";import{a as ta,l as ra,e as B,s as Z}from"../chunks/B7fsRrDu.js";import{p as _e,i as sa,s as Q,a as la,b as oa}from"../chunks/KSbaaNLN.js";import{w as j,o as na}from"../chunks/BY3dpQjh.js";function ee(e,a){return a}function ia(e,a,t,r){for(var s=[],o=a.length,n=0;n<o;n++)Pe(a[n].e,s,!0);var u=o>0&&s.length===0&&t!==null;if(u){var x=t.parentNode;Be(x),x.append(t),r.clear(),O(e,a[0].prev,a[o-1].next)}Je(s,()=>{for(var b=0;b<o;b++){var h=a[b];u||(r.delete(h.k),O(e,h.prev,h.next)),Ue(h.e,!u)}})}function ae(e,a,t,r,s,o=null){var n=e,u={flags:a,items:new Map,first:null},x=(a&ge)!==0;if(x){var b=e;n=I?G(ye(b)):b.appendChild(Ne())}I&&Ce();var h=null,N=!1,v=se(()=>{var m=t();return Re(m)?m:m==null?[]:ke(m)});Me(()=>{var m=q(v),i=m.length;if(N&&i===0)return;N=i===0;let S=!1;if(I){var T=n.data===Oe;T!==(i===0)&&(n=ie(),G(n),K(!1),S=!0)}if(I){for(var E=null,k,g=0;g<i;g++){if(Y.nodeType===8&&Y.data===Le){n=Y,S=!0,K(!1);break}var f=m[g],_=r(f,g);k=Ae(Y,u,E,null,f,_,g,s,a,t),u.items.set(_,k),E=k}i>0&&G(ie())}I||fa(m,u,n,s,a,r,t),o!==null&&(i===0?h?xe(h):h=Te(()=>o(n)):h!==null&&De(h,()=>{h=null})),S&&K(!0),q(v)}),I&&(n=Y)}function fa(e,a,t,r,s,o,n){var M,y,L,R;var u=(s&Ve)!==0,x=(s&(le|oe))!==0,b=e.length,h=a.items,N=a.first,v=N,m,i=null,S,T=[],E=[],k,g,f,_;if(u)for(_=0;_<b;_+=1)k=e[_],g=o(k,_),f=h.get(g),f!==void 0&&((M=f.a)==null||M.measure(),(S??(S=new Set)).add(f));for(_=0;_<b;_+=1){if(k=e[_],g=o(k,_),f=h.get(g),f===void 0){var z=v?v.e.nodes_start:t;i=Ae(z,a,i,i===null?a.first:i.next,k,g,_,r,s,n),h.set(g,i),T=[],E=[],v=i.next;continue}if(x&&ua(f,k,_,s),(f.e.f&W)!==0&&(xe(f.e),u&&((y=f.a)==null||y.unfix(),(S??(S=new Set)).delete(f))),f!==v){if(m!==void 0&&m.has(f)){if(T.length<E.length){var H=E[0],l;i=H.prev;var c=T[0],p=T[T.length-1];for(l=0;l<T.length;l+=1)he(T[l],H,t);for(l=0;l<E.length;l+=1)m.delete(E[l]);O(a,c.prev,p.next),O(a,i,c),O(a,p,H),v=H,i=p,_-=1,T=[],E=[]}else m.delete(f),he(f,v,t),O(a,f.prev,f.next),O(a,f,i===null?a.first:i.next),O(a,i,f),i=f;continue}for(T=[],E=[];v!==null&&v.k!==g;)(v.e.f&W)===0&&(m??(m=new Set)).add(v),E.push(v),v=v.next;if(v===null)continue;f=v}T.push(f),i=f,v=f.next}if(v!==null||m!==void 0){for(var d=m===void 0?[]:ke(m);v!==null;)(v.e.f&W)===0&&d.push(v),v=v.next;var w=d.length;if(w>0){var A=(s&ge)!==0&&b===0?t:null;if(u){for(_=0;_<w;_+=1)(L=d[_].a)==null||L.measure();for(_=0;_<w;_+=1)(R=d[_].a)==null||R.fix()}ia(a,d,A,h)}}u&&He(()=>{var V;if(S!==void 0)for(f of S)(V=f.a)==null||V.apply()}),fe.first=a.first&&a.first.e,fe.last=i&&i.e}function ua(e,a,t,r){(r&le)!==0&&ue(e.v,a),(r&oe)!==0?ue(e.i,t):e.i=t}function Ae(e,a,t,r,s,o,n,u,x,b){var h=(x&le)!==0,N=(x&Ye)===0,v=h?N?Ee(s):ve(s):s,m=(x&oe)===0?n:ve(n),i={i:m,v,k:o,a:null,e:null,prev:t,next:r};try{return i.e=Te(()=>u(e,v,m,b),I),i.e.prev=t&&t.e,i.e.next=r&&r.e,t===null?a.first=i:(t.next=i,t.e.next=i.e),r!==null&&(r.prev=i,r.e.prev=i.e),i}finally{}}function he(e,a,t){for(var r=e.next?e.next.e.nodes_start:t,s=a?a.e.nodes_start:t,o=e.e.nodes_start;o!==r;){var n=$e(o);s.before(o),o=n}}function O(e,a,t){a===null?e.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}const me=[...` 	
\r\f \v\uFEFF`];function va(e,a,t){var r=""+e;if(t){for(var s in t)if(t[s])r=r?r+" "+s:s;else if(r.length)for(var o=s.length,n=0;(n=r.indexOf(s,n))>=0;){var u=n+o;(n===0||me.includes(r[n-1]))&&(u===r.length||me.includes(r[u]))?r=(n===0?"":r.substring(0,n))+r.substring(u+1):n=u}}return r===""?null:r}function pe(e,a,t,r,s,o){var n=e.__className;if(I||n!==t||n===void 0){var u=va(t,r,o);(!I||u!==e.getAttribute("class"))&&(u==null?e.removeAttribute("class"):e.className=u),e.__className=t}else if(o&&s!==o)for(var x in o){var b=!!o[x];(s==null||b!==!!s[x])&&e.classList.toggle(x,b)}return o}const ca=Symbol("is custom element"),da=Symbol("is html");function _a(e){if(I){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var r=e.value;be(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var s=e.checked;be(e,"checked",null),e.checked=s}}};e.__on_r=t,ze(t),ta()}}function be(e,a,t,r){var s=ha(e);I&&(s[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||s[a]!==(s[a]=t)&&(a==="loading"&&(e[Fe]=t),e.removeAttribute(a))}function ha(e){return e.__attributes??(e.__attributes={[ca]:e.nodeName.includes("-"),[da]:e.namespaceURI===Ge})}function ma(e,a,t=a){var r=Ke();ra(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=te(e)?re(o):o,t(o),r&&o!==(o=a())){var n=e.selectionStart,u=e.selectionEnd;e.value=o??"",u!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(u,e.value.length))}}),(I&&e.defaultValue!==e.value||We(a)==null&&e.value)&&t(te(e)?re(e.value):e.value),Xe(()=>{var s=a();te(e)&&s===re(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function te(e){var a=e.type;return a==="number"||a==="range"}function re(e){return e===""?null:+e}function pa(e,a,t){var r=Ze(e,a);r&&r.set&&(e[a]=t,Qe(()=>{e[a]=null}))}var ba=$('<div class="todo svelte-1mcxqkh"><p> </p> <button class="delete svelte-1mcxqkh">×</button></div>'),ga=$('<div class="todo svelte-1mcxqkh"><p> </p> <button class="svelte-1mcxqkh">×</button></div>'),xa=$('<div class="svelte-1mcxqkh"><h1> </h1> <!></div>'),Ta=$(`<div class="popup svelte-1mcxqkh"><h5 class="svelte-1mcxqkh">Welcome! Just start typing your todos above...</h5> <h5 class="svelte-1mcxqkh">In case you want to add categories, start your todo with an exclamation
      mark !, like this:</h5> <h5 class="svelte-1mcxqkh">!school finish history page 121/127</h5></div> <button class="close svelte-1mcxqkh">Close</button>`,1),ka=$('<h1>MINIMAL TODO APP</h1> <input type="text" placeholder="Enter a todo" class="svelte-1mcxqkh"> <div class="svelte-1mcxqkh"></div> <!> <!> <footer class="svelte-1mcxqkh"><h6 class="by svelte-1mcxqkh">Provided by Fausto Zamparelli</h6></footer>',1);function Na(e,a){je(a,!1);const[t,r]=la(),s=()=>Q(u(),"$todoText",t),o=()=>Q(x(),"$todoType",t),n=()=>Q(h,"$todos",t);let u=_e(a,"todoText",24,()=>j("")),x=_e(a,"todoType",24,()=>j("global"));function b(){try{let l=localStorage.getItem("todos");return l?JSON.parse(l):{global:[]}}catch(l){return console.error("Error accessing localStorage:",l),{global:[]}}}const h=j(b());let N=Ee(!1);na(()=>{localStorage.getItem("hasVisited")||(de(N,!0),localStorage.setItem("hasVisited","true"))});function v(){de(N,!1)}function m(l){try{localStorage.setItem("todos",JSON.stringify(l))}catch(c){console.error("Error saving to localStorage:",c)}}function i(){s().trim()&&(h.update(l=>{var d,w;let c={...l},p=s();if(p[0]==="!"){const A=(w=(d=p.match(/^!\w+\s*/))==null?void 0:d[0])==null?void 0:w.slice(1);A&&(c[A]||(c[A]=[]),c[A].push({text:p.replace(/^!\w+\s*/,""),completed:!1}))}else c[o()]=c[o()]||[],c[o()].push({text:p,completed:!1});return m(c),c}),u().set(""))}function S(l,c){h.update(p=>{let d={...p};return d[l]=d[l].filter((w,A)=>A!==c),l!=="global"&&d[l].length===0&&delete d[l],m(d),d})}function T(l,c){h.update(p=>{let d={...p};return d[l]=[...d[l]],d[l][c].completed=!d[l][c].completed,m(d),d})}qe();var E=ka(),k=C(ce(E),2);_a(k);var g=C(k,2);ae(g,5,()=>n().global,ee,(l,c,p)=>{let d=()=>q(c).text,w=()=>q(c).completed;var A=ba(),M=P(A);let y;var L=P(M,!0);D(M);var R=C(M,2);D(A),X(V=>{y=pe(M,1,"svelte-1mcxqkh",null,y,V),Z(L,d())},[()=>({completed:w()})],se),B("click",M,()=>T("global",p)),B("click",R,()=>S("global",p)),U(l,A)}),D(g);var f=C(g,2);ae(f,1,()=>Object.keys(n()).filter(l=>l!=="global"),ee,(l,c)=>{var p=xa(),d=P(p),w=P(d,!0);D(d);var A=C(d,2);ae(A,1,()=>n()[q(c)],ee,(M,y,L)=>{let R=()=>q(y).text,V=()=>q(y).completed;var F=ga(),J=P(F);let ne;var Ie=P(J,!0);D(J);var Se=C(J,2);D(F),X(we=>{ne=pe(J,1,"svelte-1mcxqkh",null,ne,we),Z(Ie,R())},[()=>({completed:V()})],se),B("click",J,()=>T(q(c),L)),B("click",Se,()=>S(q(c),L)),U(M,F)}),D(p),X(()=>Z(w,q(c))),U(l,p)});var _=C(f,2);{var z=l=>{var c=Ta(),p=C(ce(c),2);B("click",p,v),U(l,c)};sa(_,l=>{q(N)&&l(z)})}aa(2),ma(k,s,l=>oa(u(),l)),B("keydown",k,l=>l.key==="Enter"&&i()),U(e,E),pa(a,"todos",h);var H=ea({todos:h});return r(),H}export{Na as component};
